<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>Pattern Classification</title>
    <style>
        body { font-family: Arial; padding: 40px; }
        .preview { width: 250px; margin-top: 20px; }
        #result { margin-top: 20px; font-size: 20px; font-weight: bold; }
    </style>
</head>
<body>
<h2>ğŸ‘• íŒ¨í„´ ë¶„ì„ (Spring â†’ FastAPI â†’ ML)</h2>

<input type="file" id="fileInput" accept="image/*" />
<button onclick="uploadImage()">ë¶„ì„í•˜ê¸°</button>

<div>
    <img id="preview" class="preview" style="display:none;" />
</div>

<div id="result"></div>

<script>
    function uploadImage() {
        const fileInput = document.getElementById("fileInput");
        if (!fileInput.files[0]) {
            alert("ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!");
            return;
        }

        // ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
        const preview = document.getElementById("preview");
        preview.src = URL.createObjectURL(fileInput.files[0]);
        preview.style.display = "block";

        const formData = new FormData();
        formData.append("file", fileInput.files[0]);

        fetch("/pattern/predict", {
            method: "POST",
            body: formData
        })
        .then(res => res.json())
        .then(data => {
            document.getElementById("result").innerHTML =
                `ğŸ“Œ ê²°ê³¼: <span style='color:blue'>${data.prediction}</span><br>
                 ğŸ”¥ ì‹ ë¢°ë„: ${data.confidence}`;
        })
        .catch(err => {
            document.getElementById("result").innerHTML = "âŒ ì˜¤ë¥˜ ë°œìƒ!";
            console.error(err);
        });
    }
</script>
</body>
</html>